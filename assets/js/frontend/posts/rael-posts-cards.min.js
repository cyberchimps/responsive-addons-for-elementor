class RaelCardsHandler extends elementorModules.frontend.handlers.Base{getSkinPrefix(){return"rael_cards_"}bindEvents(){var e=this.getModelCID(),t=this;elementorFrontend.addListenerOnce(e,"resize",(function(){t.onWindowResize()}))}getClosureMethodsNames(){return elementorModules.frontend.handlers.Base.prototype.getClosureMethodsNames.apply(this,arguments).concat(["fitImages","onWindowResize","runMasonry","applySimpleMasonry","_actuallyApplyMasonry"])}getDefaultSettings(){return{classes:{fitHeight:"elementor-fit-height",hasItemRatio:"elementor-has-item-ratio"},selectors:{postsContainer:".responsive-posts-container",post:".elementor-post",postThumbnail:".elementor-post__thumbnail",postThumbnailImage:".elementor-post__thumbnail img"}}}getDefaultElements(){var e=this.getSettings("selectors");return{$postsContainer:this.$element.find(e.postsContainer),$posts:this.$element.find(e.post)}}fitImage(e){var t=this.getSettings(),s=e.find(t.selectors.postThumbnail),n=s.find("img")[0];if(n){var a=s.outerHeight()/s.outerWidth(),i=n.naturalHeight/n.naturalWidth;s.toggleClass(t.classes.fitHeight,i<a)}}fitImages(){var e=jQuery,t=this,s=getComputedStyle(this.$element[0],":after").content,n=this.getSettings();this.elements.$postsContainer.toggleClass(n.classes.hasItemRatio,!!s.match(/\d/)),t.isMasonryEnabled()||this.elements.$posts.each((function(){var s=e(this),a=s.find(n.selectors.postThumbnailImage);t.fitImage(s),a.on("load",(function(){t.fitImage(s)}))}))}setColsCountSettings(){var e,t=elementorFrontend.getCurrentDeviceMode(),s=this.getElementSettings(),n=this.getSkinPrefix();switch(t){case"mobile":e=s[n+"columns_mobile"];break;case"tablet":e=s[n+"columns_tablet"];break;default:e=s[n+"columns"]}this.setSettings("colsCount",e)}isMasonryEnabled(){return!!this.getElementSettings(this.getSkinPrefix()+"masonry")}initMasonry(){var e=this;"undefined"!=typeof imagesLoaded&&imagesLoaded(this.elements.$posts,(function(){e.runMasonry()}))}runMasonry(){var e=this.elements;if(e.$postsContainer.length){this.setColsCountSettings();var t=parseInt(this.getSettings("colsCount"),10),s=this.isMasonryEnabled();if(this.destroyMasonry(),s&&t&&!(t<2)){var n=e.$postsContainer[0];if(0!==n.offsetWidth){e.$postsContainer.addClass("elementor-posts-masonry");var a=parseInt(this.getElementSettings(this.getSkinPrefix()+"row_gap.size")||this.getElementSettings(this.getSkinPrefix()+"item_gap.size")||0,10);this.applySimpleMasonry(n,t,a)}else{var i=this;setTimeout((function(){i.runMasonry()}),200)}}}}applySimpleMasonry(e,t,s){if(e){var n=e.querySelectorAll(".elementor-post");if(n.length){var a=this.$element.find(".elementor-widget-container")[0];if(a){var i=a.getBoundingClientRect().width;if(window.elementorFrontend&&elementorFrontend.isEditMode()&&i<300){var o=this;setTimeout((function(){o.applySimpleMasonry(e,t,s)}),200)}else{var r=(i-s*(t-1))/t;e.style.position="relative",e.style.height="auto";var l=new Array(t).fill(0);n.forEach((function(e){e.style.position="absolute",e.style.width=r+"px",e.style.boxSizing="border-box";for(var n=0,a=1;a<t;a++)l[a]<l[n]&&(n=a);var i=n*(r+s),o=l[n];e.style.left=i+"px",e.style.top=o+"px",l[n]+=e.offsetHeight+s})),e.style.height=Math.max(...l)+"px"}}}}}run(){this.fitImages();var e=this;setTimeout((function(){e.initMasonry()}),500)}onInit(...e){elementorModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments),this.bindEvents(),this.fitImages(),this.initMasonry()}onWindowResize(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){e.fitImages(),e.runMasonry()}),250)}onElementChange(e){if(e&&(e.includes("masonry")||e.includes("columns")||e.includes("row_gap")||e.includes("item_gap"))){const e=this;requestAnimationFrame((()=>{e.fitImages(),e.runMasonry()}))}}destroyMasonry(){var e=this.elements.$postsContainer[0];if(e){var t=e.querySelectorAll(".elementor-post");e.style.height="",e.classList.remove("elementor-posts-masonry"),t.forEach((function(e){e.style.position="",e.style.top="",e.style.left="",e.style.width="",e.style.marginTop="",e.style.float="",e.style.transition=""}))}}}function forceRaelMasonryReflow(e){if(!window.elementorFrontend)return;const t=elementorFrontend.elementsHandler.handlers;for(let s in t){const n=t[s];if(n&&n.$element&&n.$element[0]===e[0]&&"function"==typeof n.onWindowResize){n.onWindowResize();break}}}function refreshRaelMasonry(e){window.elementorFrontend&&setTimeout((function(){elementorFrontend.elementsHandler.runReadyTrigger(e)}),50)}function simpleMasonryGlobal(e){var t=document.querySelector(e);if(t){var s=t.querySelectorAll(".elementor-post");if(0!==s.length){var n=parseInt(this.getElementSettings(this.getSkinPrefix()+"row_gap.size")||this.getElementSettings(this.getSkinPrefix()+"item_gap.size")||0,10),a=t.offsetWidth;if(0!==a){var i=(a-2*n)/3;t.style.position="relative",t.style.height="auto";var o=new Array(3).fill(0);s.forEach((function(e,t){e.style.position="absolute",e.style.width=i+"px",e.style.boxSizing="border-box";for(var s=0,a=1;a<3;a++)o[a]<o[s]&&(s=a);var r=s*(i+n),l=o[s];e.style.left=r+"px",e.style.top=l+"px",o[s]+=e.offsetHeight+n}));var r=Math.max(...o);t.style.height=r+"px"}}}}jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/rael-posts.rael_cards",(e=>{elementorFrontend.elementsHandler.addHandler(RaelCardsHandler,{$element:e})}))}));var paged_no=1,$=jQuery.noConflict();function callAjax(e,t,s,n,a,i){let o=a.data("id");$.ajax({type:"POST",url:raelpostsvar.ajaxurl,data:{action:"rael_get_posts_by_terms",nonce:raelpostsvar.nonce,data:{term:e,postPerPage:t,paged:s,pid:n,widget_id:o,skin:i}},success:function(e){var t=a.find(".responsive-posts-container");t.empty(),t.append(e.html),t.next(".rael-post-pagination").first().remove(),$(e.pagination).insertAfter(t),$("div.responsive-post-loader").remove(),"undefined"!=typeof imagesLoaded?imagesLoaded(t[0],(function(){setTimeout(forceWindowResize,50)})):setTimeout(forceWindowResize,150)}})}function forceWindowResize(){window.dispatchEvent(new Event("resize"))}$(".rael_post_filterable_tabs li").click((function(e){e.preventDefault();let t=$(this).closest(".elementor-widget-rael-posts");var s=$(this).data("term"),n=$(this).parent().data("post-per-page"),a=$(this).parent().data("paged");paged_no=a;var i=$(this).parent().data("pid"),o=$(this).parent().data("skin"),r=$(this);r.siblings().removeClass("rael_post_active_filterable_tab"),r.addClass("rael_post_active_filterable_tab"),""!==t.find(".responsive-posts-container").data("pagination")&&$(".rael-post-pagination").length?$('<div class="responsive-post-loader"></div>').insertAfter($(".rael-post-pagination")):$('<div class="responsive-post-loader"></div>').insertAfter($(".responsive-posts-container")),callAjax(s,n,a,i,t,o)})),$("body").on("change",".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown",(function(e){let t=$(this).closest(".elementor-widget-rael-posts"),s=t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term");var n=$(this).data("post-per-page"),a=$(this).data("paged");paged_no=a;var i=$(this).data("pid"),o=$(this).data("skin");""!==t.find(".responsive-posts-container").data("pagination")?$('<div class="responsive-post-loader"></div>').insertAfter($(".rael-post-pagination")):$('<div class="responsive-post-loader"></div>').insertAfter($(".responsive-posts-container")),callAjax(s,n,a,i,t,o)})),$("body").on("click",".rael-post-pagination .page-numbers",(function(e){let t=$(this).closest(".elementor-widget-rael-posts");t.length>0&&e.preventDefault(),$(".rael-post-pagination span.elementor-screen-only").remove();var s=1,n=parseInt(t.find(".rael-post-pagination .page-numbers.current").html()),a=$(this);s=a.hasClass("next")?n+1:a.hasClass("prev")?n-1:a.html(),"prev_next"===t.find(".responsive-posts-container").data("pagination")&&(s=t.find(".responsive-posts-container").data("paged"),a.hasClass("next")?s+=1:s-=1,t.find(".responsive-posts-container").data("paged",s));var i=t.find(".responsive-posts-container").data("pid");if(window.innerWidth<=767)var o=void 0===t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term")?"*all":t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term");else o=void 0===t.find(".rael_post_active_filterable_tab").data("term")?"*all":t.find(".rael_post_active_filterable_tab").data("term");var r=t.find(".responsive-posts-container").data("skin"),l=t.find(".responsive-posts-container").data("post-per-page"),d=s;t.length>0&&$('<div class="responsive-post-loader"></div>').insertAfter($(".rael-post-pagination")),$("html, body").animate({scrollTop:t.find(".responsive-posts-container").offset().top-50},1e3),callAjax(o,l,d,i,t,r)})),$("body").on("click",".rael-post-pagination .rael_pagination_load_more",(function(e){let t=$(this).closest(".elementor-widget-rael-posts");$('<div class="responsive-post-load-more-loader"> <div class="responsive-post-load-more-loader-dot"></div> <div class="responsive-post-load-more-loader-dot"></div> <div class="responsive-post-load-more-loader-dot"></div> </div>').insertAfter(t.find(".rael-post-pagination")),t.find(".rael-post-pagination").hide();var s=t.find(".responsive-posts-container").data("pid"),n=t.find(".responsive-posts-container").data("skin");if(window.innerWidth<=767)var a=void 0===t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term")?"*all":t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term");else a=void 0===t.find(".rael_post_active_filterable_tab").data("term")?"*all":t.find(".rael_post_active_filterable_tab").data("term");var i=t.find(".responsive-posts-container").data("post-per-page"),o=paged_no+=1;t.find(".responsive-posts-container").data("paged",o);let r=t.data("id");$.ajax({type:"POST",url:raelpostsvar.ajaxurl,data:{action:"rael_get_posts_by_terms",data:{term:a,postPerPage:i,paged:o,pid:s,widget_id:r,skin:n},nonce:raelpostsvar.nonce},success:function(e){var s=t.find(".responsive-posts-container");"infinite"===s.data("pagination")&&(t.find(".responsive-post-load-more-loader").remove(),s.append(e.html),s.next(".rael-post-pagination").first().remove(),$(e.pagination).insertAfter(s))}})})),window.addEventListener("load",(function(){setTimeout((function(){jQuery(".elementor-widget-rael-posts").each((function(){var e=jQuery(this);setTimeout((function(){refreshRaelMasonry(e)}),800)}))}),1500)})),window.addEventListener("resize",(function(){setTimeout((function(){jQuery(".elementor-widget-rael-posts").each((function(){var e=jQuery(this);setTimeout((function(){refreshRaelMasonry(e)}),200)}))}),200)}));

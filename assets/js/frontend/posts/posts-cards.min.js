class RaelCardsHandler extends elementorModules.frontend.handlers.Base{getSkinPrefix(){return"rael_cards_"}bindEvents(){var e=this.getModelCID(),t=this;elementorFrontend.addListenerOnce(e,"resize",(function(){t.onWindowResize()}))}getClosureMethodsNames(){return elementorModules.frontend.handlers.Base.prototype.getClosureMethodsNames.apply(this,arguments).concat(["fitImages","onWindowResize","runMasonry","applySimpleMasonry","_actuallyApplyMasonry"])}getDefaultSettings(){return{classes:{fitHeight:"elementor-fit-height",hasItemRatio:"elementor-has-item-ratio"},selectors:{postsContainer:".responsive-posts-container",post:".elementor-post",postThumbnail:".elementor-post__thumbnail",postThumbnailImage:".elementor-post__thumbnail img"}}}getDefaultElements(){var e=this.getSettings("selectors");return{$postsContainer:this.$element.find(e.postsContainer),$posts:this.$element.find(e.post)}}fitImage(e){var t=this.getSettings(),s=e.find(t.selectors.postThumbnail),a=s.find("img")[0];if(a){var n=s.outerHeight()/s.outerWidth(),o=a.naturalHeight/a.naturalWidth;s.toggleClass(t.classes.fitHeight,o<n)}}fitImages(){var e=jQuery,t=this,s=getComputedStyle(this.$element[0],":after").content,a=this.getSettings();this.elements.$postsContainer.toggleClass(a.classes.hasItemRatio,!!s.match(/\d/)),t.isMasonryEnabled()||this.elements.$posts.each((function(){var s=e(this),n=s.find(a.selectors.postThumbnailImage);t.fitImage(s),n.on("load",(function(){t.fitImage(s)}))}))}setColsCountSettings(){var e,t=elementorFrontend.getCurrentDeviceMode(),s=this.getElementSettings(),a=this.getSkinPrefix();switch(t){case"mobile":e=s[a+"columns_mobile"];break;case"tablet":e=s[a+"columns_tablet"];break;default:e=s[a+"columns"]}this.setSettings("colsCount",e)}isMasonryEnabled(){return!!this.getElementSettings(this.getSkinPrefix()+"masonry")}initMasonry(){var e=this;"undefined"!=typeof imagesLoaded&&imagesLoaded(this.elements.$posts,(function(){e.runMasonry()}))}runMasonry(){var e=this.elements;if(e.$postsContainer.length){this.setColsCountSettings();var t=parseInt(this.getSettings("colsCount"),10),s=this.isMasonryEnabled();if(this.destroyMasonry(),s&&t&&!(t<2)){var a=e.$postsContainer[0];if(0!==a.offsetWidth){e.$postsContainer.addClass("elementor-posts-masonry");var n=parseInt(this.getElementSettings(this.getSkinPrefix()+"row_gap.size")||this.getElementSettings(this.getSkinPrefix()+"item_gap.size")||0,10);this.applySimpleMasonry(a,t,n)}else{var o=this;setTimeout((function(){o.runMasonry()}),200)}}}}applySimpleMasonry(e,t,s){if(e){var a=e.querySelectorAll(".elementor-post");if(0!==a.length){var n=e.offsetWidth;if(0!==n){var o=(n-s*(t-1))/t;e.style.position="relative",e.style.height="auto",a.forEach((function(e){e.style.position="relative",e.style.width=o+"px",e.style.float="left",e.style.marginRight=s+"px",e.style.marginBottom=s+"px",e.style.boxSizing="border-box"})),e.offsetHeight;var i=new Array(t).fill(0);a.forEach((function(e){e.style.position="absolute",e.style.float="",e.style.marginRight="",e.style.marginBottom="",e.style.transition="transform 0.3s ease";for(var a=0,n=1;n<t;n++)i[n]<i[a]&&(a=n);var r=a*(o+s),l=i[a];e.style.left=r+"px",e.style.top=l+s+"px",i[a]+=e.offsetHeight+s}));var r=Math.max(...i);e.style.height=r+"px";l=this;setTimeout((function(){var a=e.offsetWidth;a>0&&a!==n&&l.applySimpleMasonry(e,t,s)}),300)}else{var l=this;setTimeout((function(){l.applySimpleMasonry(e,t,s)}),200)}}}}run(){this.fitImages();var e=this;setTimeout((function(){e.initMasonry()}),500)}onInit(...e){elementorModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments),this.bindEvents(),this.fitImages(),this.initMasonry()}onWindowResize(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){e.fitImages(),e.runMasonry()}),250)}onElementChange(e){if(e&&(e.includes("masonry")||e.includes("columns")||e.includes("row_gap")||e.includes("item_gap"))){const e=this;requestAnimationFrame((()=>{e.fitImages(),e.runMasonry()}))}}destroyMasonry(){var e=this.elements.$postsContainer[0];if(e){var t=e.querySelectorAll(".elementor-post");e.style.height="",e.classList.remove("elementor-posts-masonry"),t.forEach((function(e){e.style.position="",e.style.top="",e.style.left="",e.style.width="",e.style.marginTop="",e.style.float="",e.style.transition=""}))}}}function refreshRaelMasonry(e){e.data("id");var t=elementorFrontend.elementsHandler.handlers;for(var s in t)if(t[s]&&t[s].$element&&t[s].$element[0]===e[0]){t[s].runMasonry&&setTimeout((function(){t[s].runMasonry()}),800);break}}function simpleMasonryGlobal(e){var t=document.querySelector(e);if(t){var s=t.querySelectorAll(".elementor-post");if(0!==s.length){var a=parseInt(this.getElementSettings(this.getSkinPrefix()+"row_gap.size")||this.getElementSettings(this.getSkinPrefix()+"item_gap.size")||0,10),n=t.offsetWidth;if(0!==n){var o=(n-2*a)/3;t.style.position="relative",t.style.height="auto";var i=new Array(3).fill(0);s.forEach((function(e,t){e.style.position="absolute",e.style.width=o+"px",e.style.boxSizing="border-box";for(var s=0,n=1;n<3;n++)i[n]<i[s]&&(s=n);var r=s*(o+a),l=i[s];e.style.left=r+"px",e.style.top=l+"px",i[s]+=e.offsetHeight+a}));var r=Math.max(...i);t.style.height=r+"px"}}}}jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/rael-posts.rael_cards",(e=>{elementorFrontend.elementsHandler.addHandler(RaelCardsHandler,{$element:e})}))}));var paged_no=1,$=jQuery.noConflict();function callAjax(e,t,s,a,n,o){let i=n.data("id");$.ajax({type:"POST",url:localize.ajaxurl,data:{action:"rael_get_posts_by_terms",data:{term:e,postPerPage:t,paged:s,pid:a,widget_id:i,skin:o}},success:function(e){if(!e||!0!==e.success)return console.error("RAEL AJAX failed",e),void $(".responsive-post-loader").remove();var t=n.find(".responsive-posts-container");t.html(e.data.html),t.next(".rael-post-pagination").remove(),$(e.data.pagination).insertAfter(t),$(".responsive-post-loader").remove(),setTimeout((function(){refreshRaelMasonry(n)}),500)},error:function(e,t,s){console.error("RAEL AJAX error:",s),$(".responsive-post-loader").remove()}})}$(".rael_post_filterable_tabs li").click((function(e){e.preventDefault();let t=$(this).closest(".elementor-widget-rael-posts");var s=$(this).data("term"),a=$(this).parent().data("post-per-page"),n=$(this).parent().data("paged");paged_no=n;var o=$(this).parent().data("pid"),i=$(this).parent().data("skin"),r=$(this);r.siblings().removeClass("rael_post_active_filterable_tab"),r.addClass("rael_post_active_filterable_tab"),""!==t.find(".responsive-posts-container").data("pagination")&&$(".rael-post-pagination").length?$('<div class="responsive-post-loader"></div>').insertAfter($(".rael-post-pagination")):$('<div class="responsive-post-loader"></div>').insertAfter($(".responsive-posts-container")),callAjax(s,a,n,o,t,i)})),$("body").on("change",".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown",(function(e){let t=$(this).closest(".elementor-widget-rael-posts"),s=t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term");var a=$(this).data("post-per-page"),n=$(this).data("paged");paged_no=n;var o=$(this).data("pid"),i=$(this).data("skin");""!==t.find(".responsive-posts-container").data("pagination")?$('<div class="responsive-post-loader"></div>').insertAfter($(".rael-post-pagination")):$('<div class="responsive-post-loader"></div>').insertAfter($(".responsive-posts-container")),callAjax(s,a,n,o,t,i)})),$("body").on("click",".rael-post-pagination .page-numbers",(function(e){let t=$(this).closest(".elementor-widget-rael-posts");t.length>0&&e.preventDefault(),$(".rael-post-pagination span.elementor-screen-only").remove();var s=1,a=parseInt(t.find(".rael-post-pagination .page-numbers.current").html()),n=$(this);s=n.hasClass("next")?a+1:n.hasClass("prev")?a-1:n.html(),"prev_next"===t.find(".responsive-posts-container").data("pagination")&&(s=t.find(".responsive-posts-container").data("paged"),n.hasClass("next")?s+=1:s-=1,t.find(".responsive-posts-container").data("paged",s));var o=t.find(".responsive-posts-container").data("pid");if(window.innerWidth<=767)var i=void 0===t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term")?"*all":t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term");else i=void 0===t.find(".rael_post_active_filterable_tab").data("term")?"*all":t.find(".rael_post_active_filterable_tab").data("term");var r=t.find(".responsive-posts-container").data("skin"),l=t.find(".responsive-posts-container").data("post-per-page"),p=s;t.length>0&&$('<div class="responsive-post-loader"></div>').insertAfter($(".rael-post-pagination")),$("html, body").animate({scrollTop:t.find(".responsive-posts-container").offset().top-50},1e3),callAjax(i,l,p,o,t,r)})),$("body").on("click",".rael-post-pagination .rael_pagination_load_more",(function(e){let t=$(this).closest(".elementor-widget-rael-posts");$('<div class="responsive-post-load-more-loader"> <div class="responsive-post-load-more-loader-dot"></div> <div class="responsive-post-load-more-loader-dot"></div> <div class="responsive-post-load-more-loader-dot"></div> </div>').insertAfter(t.find(".rael-post-pagination")),t.find(".rael-post-pagination").hide();var s=t.find(".responsive-posts-container").data("pid"),a=t.find(".responsive-posts-container").data("skin");if(window.innerWidth<=767)var n=void 0===t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term")?"*all":t.find(".rael_post_filterable_tabs_wrapper_dropdown .rael_post_filterable_tabs_dropdown option:selected").data("term");else n=void 0===t.find(".rael_post_active_filterable_tab").data("term")?"*all":t.find(".rael_post_active_filterable_tab").data("term");var o=t.find(".responsive-posts-container").data("post-per-page"),i=paged_no+=1;t.find(".responsive-posts-container").data("paged",i);let r=t.data("id");$.ajax({type:"POST",url:localize.ajaxurl,data:{action:"rael_get_posts_by_terms",data:{term:n,postPerPage:o,paged:i,pid:s,widget_id:r,skin:a},nonce:localize.nonce},success:function(e){var s=t.find(".responsive-posts-container");"infinite"===s.data("pagination")&&(t.find(".responsive-post-load-more-loader").remove(),s.append(e.html),s.next(".rael-post-pagination").first().remove(),$(e.pagination).insertAfter(s),setTimeout((function(){refreshRaelMasonry(t)}),500))}})})),window.addEventListener("load",(function(){setTimeout((function(){$(".elementor-widget-rael-posts").each((function(){var e=$(this);setTimeout((function(){refreshRaelMasonry(e)}),800)}))}),1500)})),window.addEventListener("resize",(function(){setTimeout((function(){$(".elementor-widget-rael-posts").each((function(){var e=$(this);setTimeout((function(){refreshRaelMasonry(e)}),200)}))}),200)}));
